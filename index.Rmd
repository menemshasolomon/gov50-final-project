---
title: "Gov 50 Final Project"
author: "Mena Solomon"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---



## Project thoughts

Why do certain individuals believe in automatic voter registration and to what extent is an individual’s perspective on automatic registration affected by their political party? In this study I plan to analyze data on the relationship between political party, race, and belief about automatic voter registration, while simultaneously comparing these conclusions to the results found on polls regarding voter ID laws. I believe that comparing these policies will be interesting as automatic registration is a somewhat new concept in America, whereas voter ID laws are historically controversial and skew on party lines. I hypothesize that views about automatic voter registration will correlate strongly with political party, much like support for voter ID laws. Furthermore, I expect that racially marginalized groups (who are typically excluded by our current system of voter registration) will tend to favor both of these measures above white voters. To analyze this data I will first break down support for automatic registration (VTPRIORITY_a_W87 where 1 = Strongly favor and 4 = Strongly oppose) and then group that data based on the explanatory variables — political party affiliation (F_PARTY_FINAL 	1 = Republican, 2 = Democrat, 3= Independent, 4 = Something else)  and race (F_RACETHNMOD 1 = White, non-Hispanic,  2 = Black, non-Hispanic , 3 = Hispanic, 4 = Other, 5 = Asian, non-Hispanic, 99 = Refused). I will then apply the same methodology to to the data on the other response variable, voter id laws (VTPRIORITY_j_W87 where  1 = Strongly favor and 4 = Strongly oppose). By identifying the correlation between opinion on the legislation and both race and political party, I will be able to understand how opinions on automatic voter registration differ in the United States and the mechanisms by which people arrive at those conclusions. If views on automatic registration group based on race and party affiliation (like they do for voter ID laws), it will prove my hypothesis that marginalized groups often left out of the voting process support automatic registration as another mechanism by which voting access can be expanded. If the data indicates no correlation between the explanatory variables and opinion on automatic registration (or less of a correlation than is present for voter id laws), it will prove that automatic registration is viewed as intrinsically different than other policies which seek to expand voting access.

```{r}
library(tidyverse)
library(haven)
library(infer)
data <-  read_sav("data/ATP W87.sav")

data <- data |>
  select(QKEY, F_AGECAT, F_GENDER, F_RACETHNMOD, F_PARTY_FINAL, VTPRIORITY_a_W87, VTPRIORITY_j_W87)|>
  rename(automaticregistration = VTPRIORITY_a_W87,
         voteridlaws = VTPRIORITY_j_W87,
         party = F_PARTY_FINAL,
         race = F_RACETHNMOD,
         gender = F_GENDER,
         age = F_AGECAT) |>
  filter(party != 4,
         party != 3,
         party != 99, 
         voteridlaws != 99,
         automaticregistration != 99,
         race != 4,
         race != 99) |>
  mutate(
    partylabel = case_when(
      party == 1 ~ "Republican",
      party == 2 ~ "Democrat"),
    racelabel = case_when(
      race == 1 ~ "White, non-Hispanic",
      race == 2 ~ "Black, non-Hispanic",
      race == 3 ~ "Hispanic",
      race == 5 ~ "Asian, non-Hispanic"),
    voteridlabel = case_when(
      voteridlaws <= 2 ~ "Supports Voter ID Laws",
      voteridlaws > 2 ~ "Against Voter ID Laws"),
    automaticreglabel = case_when(
      automaticregistration <= 2 ~ "Supports Automatic Registration",
      automaticregistration > 2 ~ "Against Automatic Registration"))


```

```{r}
voterid_automaticreg_plot <- data |>
  group_by(voteridlabel) |>
  ggplot(mapping = aes(x = factor(automaticreglabel), fill = factor(voteridlabel))) +
  geom_bar(position = "dodge") +
  labs(x = "Opinion on Automatic Registration", 
       y = "Number of Respondents", 
       title = "How Perspective on Voter ID Laws Affects Respondents Views on Automatic Registration",
       fill = "Perspective on Voter ID Laws")
voterid_automaticreg_plot
```


```{r}
voterid_plot_party <- data |>
  group_by(party) |>
  ggplot(aes(x = factor(voteridlabel), fill = factor(partylabel))) +
  geom_bar(position = "dodge") +
  labs(x = "Opinion on Voter ID Laws", 
       y = "Number of Respondents", 
       title = "How Party Membership Affects Respondents Views on Voter ID Laws",
       fill = "Party")

voterid_plot_party

automatic_registration_plot_party <- data |>
  group_by(party) |>
  ggplot(aes(x = factor(automaticreglabel), fill = factor(partylabel))) +
  geom_bar(position = "dodge") +
  labs(x = "Opinion on Automatic Registration", 
       y = "Number of Respondents", 
       title = "How Party Membership Affects Respondents Views on Automatic Registration",
       fill = "Party")

automatic_registration_plot_party
```
From the Data Visualization as well as the numerical values displayed above, it becomes clear that the party membership of a respondent correlates with their views on both voter ID laws and automatic registration. Membership with the Democratic Party correlates with negative attitudes towards voter ID laws by a coefficient of 0.45. For automatic registration, however, membership with the Democratic Party correlates with more positive views of the policy, by a coefficient of -0.54.

```{r}
voterid_plot_race <- data |>
  group_by(race) |>
  ggplot(aes(x = factor(voteridlabel), fill = factor(racelabel))) +
  geom_bar(position = "dodge") +
  labs(x = "Opinion on Voter ID Laws", 
       y = "Number of Respondents", 
       title = "How Race Affects Respondents Views on Voter ID Laws",
       fill = "Race")

voterid_plot_race

automatic_registration_plot_race <- data |>
  group_by(race) |>
  ggplot(aes(x = factor(automaticreglabel), fill = factor(racelabel))) +
  geom_bar(position = "dodge") +
  labs(x = "Opinion on Automatic Registration", 
       y = "Number of Respondents", 
       title = "How Race Affects Respondents Views on Automatic Registration",
       fill = "Race")

automatic_registration_plot_race
```


```{r}
set.seed(02138)

ate_boots <- data |>
  rep_slice_sample(prop = 1, reps = 1000, replace = TRUE) |>
  group_by(replicate, voteridlabel) |>
  summarize(automaticregistrationmean = mean(automaticregistration)) |>
  pivot_wider(names_from = voteridlabel, values_from = automaticregistrationmean) |>
  mutate(ATE = `Supports Voter ID Laws` - `Against Voter ID Laws`)
ate_boots  

ate_ci_90 <- ate_boots |>
select(replicate, ATE) |>
get_confidence_interval(level = 0.90, type = "percentile")
ate_ci_90

ate_boots |>
  ggplot(mapping = aes(x = ATE))+
  geom_histogram(aes(y = after_stat(density)), binwidth = 0.01) +
  geom_vline(xintercept = unlist(ate_ci_90), color = "red") +
  labs(x = "Average Treatment Effect", 
       y = "Density", 
       subtitle = "1,000 Bootstrap Replications of the Estimated Average Treatment Effect",
       title = "How Perspective on Voter ID Laws Effects Views on Automatic Registration")

```


```{r}
library(infer)
library(modelsummary)
fit_ate_voterid <- 
  lm(automaticregistration ~ voteridlaws + race + party + gender + age, data = data)

modelsummary::modelsummary(fit_ate_voterid,
                           statistic = c("s.e. = {std.error}",
                                         "p = {p.value}"),
                           gof_map = c("nobs", "r.squared", "adj.r.squared"))  

fit_ate_automaticreg <- 
  lm(automaticregistration ~ race + party + gender + age, data = data)

modelsummary::modelsummary(fit_ate_automaticreg,
                           statistic = c("s.e. = {std.error}",
                                         "p = {p.value}"),
                           gof_map = c("nobs", "r.squared", "adj.r.squared"))  
```
